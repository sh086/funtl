(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{486:function(s,a,t){"use strict";t.r(a);var n=t(25),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"crm工单迁移专有云"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#crm工单迁移专有云"}},[s._v("#")]),s._v(" CRM工单迁移专有云")]),s._v(" "),t("h2",{attrs:{id:"环境准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[s._v("#")]),s._v(" 环境准备")]),s._v(" "),t("h3",{attrs:{id:"测试环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试环境"}},[s._v("#")]),s._v(" 测试环境")]),s._v(" "),t("p",[s._v("​\t　首先，申请测试环境需要使用到的资源。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("- EXT私有云测试地址： http://10.10.98.152\n- CRM工单测试服务器：FAT-CRM工单2-APP（10.10.144.6）\n- CRM工单测试数据库：\n  \t域名：rm-0jz4xquq115q2lrxg.mysql.rds.ops.yanwentech.cn\n  \tIP： 10.10.148.66:3306\n  \t普通账号 crm  密码 v1PBy!Z@Pl*pmOoJ\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("​\t　接着，需要给如下IP开通访问CRM工单测试数据库（10.10.148.66）的权限。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 专有云测试:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".144.200\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".144.201\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".144.202\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".144.207\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".144.208\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".144.211\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".144.210\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 杭州分公司出口IP")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("112.17")]),s._v(".122.139\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# CRM工单测试机器IP")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".144.6\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("​\t　此外，对于测试环境的的法大大签约地址（10.10.144.15:9090），目前还需给CRM工单测试环境服务器（10.10.144.6）开通访问权限。开通后，可以通过如下命令测试，若有返回值，则表明权限开通成功。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要开通的权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".144.6 访问 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".144.15:9090\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 112.17.122.139（杭州分公司Ip）需要开通访问")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".144.6的8095（工单）、8080（CRM）、8093"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("长期未发货"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("的端口权限\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".144.15:9090\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("​\t　最后，项目迁移完成后，记得需要请允许做一下域名映射。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("http://10.10.144.6:8080/crmapitest 对应域名 https://crm.yanwentech.com/crmapitest\nhttp://10.10.144.6:8093/custworkordertest 对应域名 https://crm.yanwentech.com/custworkordertest\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"生产环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生产环境"}},[s._v("#")]),s._v(" 生产环境")]),s._v(" "),t("p",[s._v("​\t　首先，申请生产环境需要使用到的资源。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("- EXT私有云正式地址：http://10.10.98.34\n- CRM生产服务器：PRO-CRM-APP（10.10.132.176）\n- 工单生产服务器：PRO-工单系统APP（10.10.132.177）\n- CRM生产环境数据库：\n\t域名：rm-bp1z9d62d5mt1lnj3.mysql.rds.aliyuncs.com\n\tIP: 10.11.141.226:3306\n\t普通账号 ywcrm 密码 JK1@29#ie8Yc*34\n- 工单生产环境数据库：\n\t域名：rm-bp1h1a5jrppnk6zp6.mysql.rds.aliyuncs.com\n\tIP: 10.11.141.224:3306\n\t普通账号 ywwl 密码 S!aDKN2GIR!zfW%C\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("​\t　接着，需要给如下IP开通访问CRM生产数据库和工单生产数据库的访问权限。特别的，生产和测试环境的机器是不能访问的。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#专有云正式（开通访问CRM、工单生产数据库权限）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".132.213\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".132.214\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".132.215\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".132.216\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".132.217\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".132.218\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# CRM工单生产机器IP（仅开通访问CRM生产数据库权限）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".132.176\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 工单生产机器IP（仅开通访问工单生产数据库权限）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".132.177\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("​\t　最后，项目迁移完成后，记得需要请允许做一下域名映射。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("http://10.10.132.176:8080/crmapi 对应域名 https://crm.yanwentech.com/crmapi\nhttp://10.10.132.177:8093/custworkorder 对应域名 https://crm.yanwentech.com/custworkorder\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"crm服务迁移"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#crm服务迁移"}},[s._v("#")]),s._v(" CRM服务迁移")]),s._v(" "),t("h3",{attrs:{id:"生成war包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成war包"}},[s._v("#")]),s._v(" 生成war包")]),s._v(" "),t("p",[s._v("​\t　首先，需要修改YML配置文件中测试 CRM数据库地址 和 测试工单地址、长期未发货的服务地址。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改测试数据库地址")]),s._v("\nurl: jdbc:mysql://10.10.148.66:3306/customerinfo?characterEncoding"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("useSSL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\nusername: crm\npassword: v1PBy"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("Z@Pl*pmOoJ     \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改测试工单测试地址")]),s._v("\nhttps://crm.yanwentech.com/custworkordertest/api/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改长期未发货测试地址")]),s._v("\nhttp://10.10.144.6:8095/api/customer/CustomerCodeBetweenLatestOrderDate\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("​\t　然后打包项目生成可部署的war包，并通过FTP上传到服务器中即可。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打包命令")]),s._v("\nmvn package -Dmaven.test.skip"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"定制镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定制镜像"}},[s._v("#")]),s._v(" 定制镜像")]),s._v(" "),t("p",[s._v("​\t　首先，运行如下命令，新建"),t("code",[s._v("crm-api")]),s._v("目录，并将"),t("code",[s._v("crmapitest.war")]),s._v("从FTP拉取到当前目录。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建crm-api目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" crm-api\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" crm-api\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建功能目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" docker app logs\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" docker\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将crmapitest.war从FTP拉取到docker目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ftp")]),s._v(" ftp.yanwentech.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("​\t　然后，新建"),t("code",[s._v("Dockerfile")]),s._v("自定义工单服务镜像。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" Dockerfile\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑Dockerfile内容")]),s._v("\nFROM tomcat:8.5.32\nWORKDIR /usr/local/tomcat/webapps/\nRUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf *\nCOPY crm*.war "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\nRUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" ROOT\nRUN "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CRM已启动"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ROOT/index.html\nRUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" -o crm*.war -d crmapitest\nRUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf crm*.war\nEXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\nCMD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"catalina.sh"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"run"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("​\t　再着，新建"),t("code",[s._v("backups.sh")]),s._v("启动命令，完成后，执行"),t("code",[s._v("./backups.sh")]),s._v("即可保留部署的war包和日志。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" backups.sh\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑backups.sh的内容")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保留部署的war包和日志")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" crmapitest.war "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/app/crm-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d%H%M%S"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(".war\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/logs/catalina.*.log "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/app/catalina-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d%H%M%S"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(".log\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# war包保留3天，日志保留半年")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/app/crm-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"+%Y%m%d"')]),s._v(" -d  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3 day ago'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("*\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/app/catalina-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"+%Y%m"')]),s._v(" -d  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'6 month ago'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("*\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清理无效的镜像")]),s._v("\ny "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" docker image prune\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加backups.sh可执行权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x startup.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("​\t　接着，新建"),t("code",[s._v("startup.sh")]),s._v("启动命令，完成后，执行"),t("code",[s._v("./startup.sh")]),s._v("即可自动生成镜像并启动服务。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" startup.sh\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑startup.sh内容")]),s._v("\ndocker build -t crm-api "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndocker stop  crm-api\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" crm-api\ndocker run -d   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Asia/Shanghai   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--restart always   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /home/crm-api/logs:/usr/local/tomcat/logs  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_OPTS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-server -Xms2000m -Xmx6000m'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--name crm-api   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 crm-api\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加可执行权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x startup.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("​\t　最后，运行"),t("code",[s._v("startup.sh")]),s._v("脚本，完成后，可以通过如下命令验证CRM是否启动成功。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -i -k  -H "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Content-type: application/json"')]),s._v(" -X POST -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\' {"merchantCode": "30068590"}\'')]),s._v(" http://10.10.132.176:8080/crmapi/api/workOrder/thawApplication/searchBankCard\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"工单服务迁移"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#工单服务迁移"}},[s._v("#")]),s._v(" 工单服务迁移")]),s._v(" "),t("h3",{attrs:{id:"生成war包-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成war包-2"}},[s._v("#")]),s._v(" 生成war包")]),s._v(" "),t("p",[s._v("​\t　首先，需要修改YML配置文件中测试 工单数据库地址 和 测试CRM地址。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改测试数据库地址")]),s._v("\nurl: jdbc:mysql://10.10.148.66:3306/workorder?characterEncoding"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("serverTimezone")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("GMT%2B8\nusername: crm\npassword: v1PBy"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("Z@Pl*pmOoJ     \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改测试CRM地址")]),s._v("\nhttps://crm.yanwentech.com/crmapitest/api/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义context-path")]),s._v("\ncontext-path: /custworkordertest/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("​\t　然后打包项目生成可部署的war包，并通过FTP上传到服务器中即可。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打包命令")]),s._v("\nmvn package -Dmaven.test.skip"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"定制镜像-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定制镜像-2"}},[s._v("#")]),s._v(" 定制镜像")]),s._v(" "),t("p",[s._v("​\t　首先，运行如下命令，新建"),t("code",[s._v("work-order")]),s._v("目录，并将"),t("code",[s._v("WorkOrder-1.0.0.jar")]),s._v("从FTP拉取到当前目录。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建work-order目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" work-order\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" work-order\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将WorkOrder-1.0.0.jar从FTP拉取到当前目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ftp")]),s._v(" ftp.yanwentech.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("​\t　然后，新建Dockerfile自定义工单服务镜像。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" Dockerfile\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑Dockerfile内容")]),s._v("\nFROM openjdk:8\nWORKDIR /app\nCOPY WorkOrder-1.0.0.jar "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\nEXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8093")]),s._v("\nCMD java -jar -Dserver.port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8093")]),s._v(" ./WorkOrder-1.0.0.jar.jar\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("​\t　接着，新建"),t("code",[s._v("startup.sh")]),s._v("启动命令，用于支持自动部署。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" startup.sh\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑startup.sh内容")]),s._v("\ndocker build -t work-order "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndocker stop work-order\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" work-order\ndocker run -d --restart always -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Asia/Shanghai  --name work-order -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8093")]),s._v(":8093 work-order\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加可执行权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x startup.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("​\t　最后，运行"),t("code",[s._v("startup.sh")]),s._v("脚本，完成后，可以通过如下命令验证工单是否启动成功。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -i -k  -H "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Content-type: application/json"')]),s._v(" -X POST -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\' {"type": "1"}\'')]),s._v(" http://10.10.132.177:8093/custworkorder/api/workOrder/generateId\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"长期未发货服务迁移"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#长期未发货服务迁移"}},[s._v("#")]),s._v(" 长期未发货服务迁移")]),s._v(" "),t("h3",{attrs:{id:"生成jar包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成jar包"}},[s._v("#")]),s._v(" 生成JAR包")]),s._v(" "),t("p",[s._v("​\t　首先，打包项目生成可部署的JAR包，并通过FTP上传到服务器中即可。特别注意：长期未发货服务生产测试使用的数据库地址是一样的。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打包命令")]),s._v("\nmvn package -Dmaven.test.skip"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# FTP命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ftp")]),s._v(" ftp.yanwentech.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"定制镜像-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定制镜像-3"}},[s._v("#")]),s._v(" 定制镜像")]),s._v(" "),t("p",[s._v("​\t　首先，运行如下命令，新建"),t("code",[s._v("inactive-customer")]),s._v("目录，并将"),t("code",[s._v("inactive-customer-0.0.1.jar")]),s._v("从FTP拉取到当前目录。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建inactive-customer目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" inactive-customer\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" inactive-customer\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将inactive-customer-0.0.1.jar从FTP拉取到当前目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ftp")]),s._v(" ftp.yanwentech.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("​\t　然后，新建Dockerfile自定义长期未发货服务镜像。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" Dockerfile\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑Dockerfile内容")]),s._v("\nFROM openjdk:8\nWORKDIR /app\nCOPY inactive-customer-0.0.1.jar "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\nEXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8095")]),s._v("\nCMD java -jar -Dserver.port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8095")]),s._v(" ./inactive-customer-0.0.1.jar\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("​\t　接着，新建"),t("code",[s._v("startup.sh")]),s._v("启动命令，用于支持自动部署。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" startup.sh\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑startup.sh内容")]),s._v("\ndocker build -t inactive-customer "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndocker stop inactive-customer\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" inactive-customer\ndocker run -d --name inactive-customer -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8095")]),s._v(":8095 inactive-customer\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加可执行权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x startup.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("​\t　至此，长期长期未发货服务已部署完成，可以通过如下命令检测是否部署成功。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 展示8095端口是否启动，若没有8095端口，则表明启动失败")]),s._v("\nss -nultp\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本机上执行如下curl会有返回值的")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -i -k  -H "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Content-type: application/json"')]),s._v(" -X POST -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{\n\t"dateFrom": "2021-01-01",\n\t"dateTo": "2021-05-01"\n}\'')]),s._v(" http://10.10.144.6:8095/api/customer/CustomerCodeBetweenLatestOrderDate\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"附录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#附录"}},[s._v("#")]),s._v(" 附录")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询服务是否启动")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -utnalp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" LISTEN\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看端口是否启动")]),s._v("\nss -nultp\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询端口是否开发")]),s._v("\ntelnet IP:Port\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 判断地址是否可以访问")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".144.15:9090\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);